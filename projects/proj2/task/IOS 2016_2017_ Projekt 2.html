<!DOCTYPE html>
<!-- saved from url=(0085)https://www.fit.vutbr.cz/study/courses/IOS/public/Lab/projekty/projekt2/projekt2.html -->
<html dir="ltr" class="js desktop" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    
    <title>IOS 2016/2017: Projekt 2</title>
    <script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script>
    <meta name="generator" content="DokuWiki">
<!--
<meta name="robots" content="noindex,nofollow">
<meta name="keywords" content="vyuka,ios_ulohy">
<link rel="search" type="application/opensearchdescription+xml" href="https://www.fit.vutbr.cz/%7Esmrcka/w/lib/exe/opensearch.php" title="AS">
<link rel="start" href="https://www.fit.vutbr.cz/%7Esmrcka/w/">
<link rel="alternate" type="application/rss+xml" title="Recent Changes" href="https://www.fit.vutbr.cz/%7Esmrcka/w/feed.php">
<link rel="alternate" type="application/rss+xml" title="Current namespace" href="https://www.fit.vutbr.cz/%7Esmrcka/w/feed.php?mode=list&amp;ns=vyuka">
<link rel="edit" title="Edit this page" href="https://www.fit.vutbr.cz/%7Esmrcka/w/doku.php?id=vyuka:ios_ulohy&amp;do=edit">
<link rel="alternate" type="text/html" title="Plain HTML" href="https://www.fit.vutbr.cz/%7Esmrcka/w/doku.php?do=export_xhtml&amp;id=vyuka:ios_ulohy">
<link rel="alternate" type="text/plain" title="Wiki Markup" href="https://www.fit.vutbr.cz/%7Esmrcka/w/doku.php?do=export_raw&amp;id=vyuka:ios_ulohy">
<link rel="canonical" href="https://www.fit.vutbr.cz/%7Esmrcka/w/doku.php?id=vyuka:ios_ulohy">
-->
<link rel="stylesheet" type="text/css" href="./IOS 2016_2017_ Projekt 2_files/css.css">
    </head>

<body>
    <!--[if lte IE 7 ]><div id="IE7"><![endif]--><!--[if IE 8 ]><div id="IE8"><![endif]-->
    <div id="dokuwiki__site"><div id="dokuwiki__top" class="site dokuwiki mode_show tpl_simple loggedIn    ">

        
<!-- ********** HEADER ********** -->
<div id="dokuwiki__header"><div class="pad group">

<!--
    <div class="headings group">
        <ul class="a11y skip">
            <li><a href="#dokuwiki__content">skip to content</a></li>
        </ul>

        <h1><a href="https://www.fit.vutbr.cz/%7Esmrcka/w/doku.php?id=start">AS</a></h1>
            </div>

    <div class="tools group">
        <!-- USER TOOLS --
                    <div id="dokuwiki__usertools">
                <h3 class="a11y">User Tools</h3>
                <ul>
                    <li class="user">Logged in as: <bdi>Radek Koci</bdi> (<bdi>koci</bdi>)</li><li><a href="https://www.fit.vutbr.cz/%7Esmrcka/w/doku.php?id=vyuka:ios_ulohy&amp;do=profile" class="action profile" rel="nofollow" title="Update Profile">Update Profile</a></li><li><a href="https://www.fit.vutbr.cz/%7Esmrcka/w/doku.php?id=vyuka:ios_ulohy&amp;do=logout&amp;sectok=75dccd0094a2c4d1affe7b782567f985" class="action logout" rel="nofollow" title="Log Out">Log Out</a></li>                </ul>
            </div>
        
        <!-- SITE TOOLS --
        <div id="dokuwiki__sitetools">
            <h3 class="a11y">Site Tools</h3>
            <form action="/~smrcka/w/doku.php?id=start" accept-charset="utf-8" class="search" id="dw__search" method="get" role="search"><div class="no"><input name="do" value="search" type="hidden"><input placeholder="Search" id="qsearch__in" accesskey="f" name="id" class="edit" title="[F]" type="text"><button type="submit" title="Search">Search</button><div id="qsearch__out" class="ajax_qsearch JSpopup"></div></div></form>            <div class="mobileTools">
                <form action="/~smrcka/w/doku.php" method="get" accept-charset="utf-8"><div class="no"><input name="id" value="vyuka:ios_ulohy" type="hidden"><input name="sectok" value="75dccd0094a2c4d1affe7b782567f985" type="hidden"><select name="do" class="edit quickselect" title="Tools"><option value="" selected="selected">Tools</option><optgroup label="Page Tools"><option value="edit">Edit this page</option><option value="revisions">Old revisions</option></optgroup><optgroup label="Site Tools"><option value="media">Media Manager</option></optgroup><optgroup label="User Tools"><option value="logout">Log Out</option><option value="profile">Update Profile</option></optgroup></select><button type="submit" style="display: none;">&gt;</button></div></form>            </div>
            <ul>
                <li><a href="https://www.fit.vutbr.cz/%7Esmrcka/w/doku.php?id=vyuka:ios_ulohy&amp;do=media&amp;ns=vyuka" class="action media" rel="nofollow" title="Media Manager">Media Manager</a></li>            </ul>
        </div>

    </div>
-->
    <!-- BREADCRUMBS -->
    
    
    <hr class="a11y">
</div></div><!-- /header -->

        <div class="wrapper group">

            
            <!-- ********** CONTENT ********** -->
            <div id="dokuwiki__content"><div class="pad group">

    <!--            <div class="pageId"><span>vyuka:ios_ulohy</span></div> -->

                <div class="page group">
                                                            <!-- wikipage start -->
                    <!-- TOC START -->
<div id="dw__toc">
<h3 class="toggle open" style="cursor: pointer;"><strong><span>−</span></strong>Table of Contents</h3>
<div style="" aria-expanded="true">

<ul class="toc">
<li class="level1"><div class="li"><a href="https://www.fit.vutbr.cz/study/courses/IOS/public/Lab/projekty/projekt2/projekt2.html#uloha_2016_2017">2. Úloha (2016/2017)</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="https://www.fit.vutbr.cz/study/courses/IOS/public/Lab/projekty/projekt2/projekt2.html#popis_ulohy">Popis úlohy</a></div></li>
<li class="level2"><div class="li"><a href="https://www.fit.vutbr.cz/study/courses/IOS/public/Lab/projekty/projekt2/projekt2.html#detailni_specifikace_ulohy">Detailní specifikace úlohy</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="https://www.fit.vutbr.cz/study/courses/IOS/public/Lab/projekty/projekt2/projekt2.html#spusteni">Spuštění</a></div></li>
<li class="level3"><div class="li"><a href="https://www.fit.vutbr.cz/study/courses/IOS/public/Lab/projekty/projekt2/projekt2.html#implementacni_detaily">Implementační detaily</a></div></li>
<li class="level3"><div class="li"><a href="https://www.fit.vutbr.cz/study/courses/IOS/public/Lab/projekty/projekt2/projekt2.html#chybove_stavy">Chybové stavy</a></div></li>
<li class="level3"><div class="li"><a href="https://www.fit.vutbr.cz/study/courses/IOS/public/Lab/projekty/projekt2/projekt2.html#popis_procesu_a_jejich_vystupu">Popis procesů a jejich výstupů</a></div></li>
</ul>
</li>
<li class="level2"><div class="li"><a href="https://www.fit.vutbr.cz/study/courses/IOS/public/Lab/projekty/projekt2/projekt2.html#ukazka_vystupu">Ukázka výstupů</a></div></li>
<li class="level2"><div class="li"><a href="https://www.fit.vutbr.cz/study/courses/IOS/public/Lab/projekty/projekt2/projekt2.html#podminky_vypracovani_projektu">Podmínky vypracování projektu</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="https://www.fit.vutbr.cz/study/courses/IOS/public/Lab/projekty/projekt2/projekt2.html#obecne_informace">Obecné informace</a></div></li>
<li class="level3"><div class="li"><a href="https://www.fit.vutbr.cz/study/courses/IOS/public/Lab/projekty/projekt2/projekt2.html#preklad">Překlad</a></div></li>
<li class="level3"><div class="li"><a href="https://www.fit.vutbr.cz/study/courses/IOS/public/Lab/projekty/projekt2/projekt2.html#odevzdani">Odevzdání</a></div></li>
</ul>
</li>
<li class="level2"><div class="li"><a href="https://www.fit.vutbr.cz/study/courses/IOS/public/Lab/projekty/projekt2/projekt2.html#overovaci_skript">Ověřovací skript</a></div></li>
</ul></li>
</ul>
</div>
</div>
<!-- TOC END -->

<p>
<a href="http://www.fit.vutbr.cz/study/courses/IOS/public/Lab" class="urlextern" title="http://www.fit.vutbr.cz/study/courses/IOS/public/Lab" rel="nofollow">http://www.fit.vutbr.cz/study/courses/IOS/public/Lab</a>
</p>

<!--
<p>
<a href="http://www.fit.vutbr.cz/study/courses/IOS/public/Lab/projekty/projekt1/projekt1.html" class="urlextern" title="http://www.fit.vutbr.cz/study/courses/IOS/public/Lab/projekty/projekt1/projekt1.html" rel="nofollow">http://www.fit.vutbr.cz/study/courses/IOS/public/Lab/projekty/projekt1/projekt1.html</a>
</p>
-->

<p>
<a href="http://www.fit.vutbr.cz/study/courses/IOS/public/Lab/projekty/projekt2/" class="urlextern" title="http://www.fit.vutbr.cz/study/courses/IOS/public/Lab/projekty/projekt2/" rel="nofollow">http://www.fit.vutbr.cz/study/courses/IOS/public/Lab/projekty/projekt2/</a>
</p>

<h1 class="sectionedit1" id="uloha_2016_2017">2. Úloha (2016/2017)</h1>
<div class="level1">

</div>
<h2 class="sectionedit2" id="popis_ulohy">Popis úlohy</h2>
<div class="level2">

<p>
Implementujte v jazyce C modifikovaný synchronizační problém <em>Child Care</em> (můžete se inspirovat knihou <a href="http://greenteapress.com/semaphores/LittleBookOfSemaphores.pdf" class="urlextern" title="http://greenteapress.com/semaphores/LittleBookOfSemaphores.pdf" rel="nofollow">The Little Book of Semaphores</a>).
 Existuje centrum, které se stará o děti, a dva typy procesů: dospělý 
člověk (adult) a dítě (child). V centru se dospělí lidé starají o děti, 
přičemž jeden dospělý se může starat nejvýše o tři děti. Např. pokud je v
 centru 5 dětí, musí být přítomni alespoň 2 dospělí, pokud jsou pouze 3 
děti, stačí jeden dospělý. Do centra přicházejí a z centra odcházejí 
dospělí lidé a děti, ovšem tak, aby nebyla porušena výše uvedená 
výjimka. Pokud by byla odchodem dospělého porušena podmínka, musí s 
odchodem vyčkat, než odejde dostatečný počet dětí. Podobně, pokud chce 
vstoupit dítě a v centru není dostatek dospělých, musí vyčkat, až příjde
 další dospělý.
</p>

</div>
<h2 class="sectionedit3" id="detailni_specifikace_ulohy">Detailní specifikace úlohy</h2>
<div class="level2">

</div>
<h3 class="sectionedit4" id="spusteni">Spuštění</h3>
<div class="level3">
<pre class="code bash"><span class="co4">$ </span>.<span class="sy0">/</span>proj2 A C AGT CGT AWT CWT</pre>

<p>
kde
</p>
<ul>
<li class="level1"><div class="li"> <code>A</code> je počet procesů <em>adult</em>; <code>A &gt; 0</code>.</div>
</li>
<li class="level1"><div class="li"> <code>C</code> je počet procesů <em>child</em>; <code>C &gt; 0</code>.</div>
</li>
<li class="level1"><div class="li"> <code>AGT</code> je maximální hodnota doby (v milisekundách), po které je generován nový proces <em>adult</em>; <code>AGT &gt;= 0 &amp;&amp; AGT &lt; 5001</code>.  </div>
</li>
<li class="level1"><div class="li"> <code>CGT</code> je maximální hodnota doby (v milisekundách), po které je generován nový proces <em>child</em>; <code>CGT &gt;= 0 &amp;&amp; CGT &lt; 5001</code>.  </div>
</li>
<li class="level1"><div class="li"> <code>AWT</code> je maximální hodnota doby (v milisekundách), po kterou proces <em>adult</em> simuluje činnost v centru; <code>AWT &gt;= 0 &amp;&amp; AWT &lt; 5001</code>.  </div>
</li>
<li class="level1"><div class="li"> <code>CWT</code> je maximální hodnota doby (v milisekundách), po kterou proces <em>child</em> simuluje činnost v centru; <code>CWT &gt;= 0 &amp;&amp; CWT &lt; 5001</code>.  </div>
</li>
<li class="level1"><div class="li"> Všechny parametry jsou celá čísla.</div>
</li>
</ul>

</div>
<h3 class="sectionedit5" id="implementacni_detaily">Implementační detaily</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> <em class="u">Pracujte s procesy, ne s vlákny.</em></div>
</li>
<li class="level1"><div class="li"> Každému dospělému odpovídá jeden proces <em>adult</em>.</div>
</li>
<li class="level1"><div class="li"> Každému dítěti odpovídá jeden proces <em>child</em>.</div>
</li>
<li class="level1"><div class="li"> Hlavní proces vytváří ihned po spuštění dva pomocné procesy pro generování procesů <em>adult</em> a <em>child</em>.
 Poté čeká na ukončení všech procesů, které aplikace vytváří. Jakmile 
jsou tyto procesy ukončeny, ukončí se i hlavní proces s kódem (<em>exit code</em>) <code>0</code>.</div>
</li>
<li class="level1 node"><div class="li"> Generování procesů</div>
<ul>
<li class="level2"><div class="li"> <em>adult</em>: pomocný proces generuje procesy pro dospělé osoby; každý nový proces je generován po uplynutí náhodné doby z intervalu <code>&lt;0, AGT&gt;</code>; celkem vygeneruje <code>A</code> procesů.</div>
</li>
<li class="level2"><div class="li"> <em>child</em>: pomocný proces generuje procesy pro děti; každý nový proces je generován po uplynutí náhodné doby z intervalu <code>&lt;0, CGT&gt;</code>; celkem vygeneruje <code>C</code> procesů.</div>
</li>
<li class="level2"><div class="li"> Každý proces <em>adult</em> i <em>child</em> bude interně identifikován celým číslem <code>I</code>, začínajícím od <code>1</code>. Číselná řada je pro každou kategorii procesů zvlášť.</div>
</li>
<li class="level2"><div class="li"> postupně tedy vznikne hlavní proces, dva pomocné procesy, <code>A</code> procesů dospělých osob a <code>C</code> procesů dětí</div>
</li>
</ul>
</li>
<li class="level1 node"><div class="li"> Každý proces <em>adult</em> i <em>child</em> vykonává své akce a současně zapisuje informace o akcích do souboru s názvem <code>proj2.out</code>.</div>
<ul>
<li class="level2"><div class="li"> Přístup k výstupnímu zařízení (zápis informací) musí být výlučný.</div>
</li>
<li class="level2"><div class="li"> Součástí výstupních informací o akci je pořadové číslo <code>A</code> prováděné akce (viz popis výstupů). Akce se číslují od jedničky.</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> Použijte sdílenou paměť pro implementaci čítače akcí a sdílených proměnných nutných pro synchronizaci.</div>
</li>
<li class="level1"><div class="li"> Použijte <em class="u">semafory</em> pro synchronizaci procesů.</div>
</li>
<li class="level1"><div class="li"> <em class="u">Nepoužívejte aktivní čekání</em> (včetně cyklického časového uspání procesu) pro <em class="u">účely synchronizace</em>.</div>
</li>
<li class="level1"><div class="li"> Procesy, které již dokončily všechny akce, čekají na všechny ostatní procesy; všechny procesy <em>adult</em> i <em>child</em> se ukončí současně.</div>
</li>
<li class="level1"><div class="li"> Budete-li potřebovat generovat unikátní klíč, je vhodné použít funkci <a href="http://man7.org/linux/man-pages/man3/ftok.3.html" class="urlextern" title="http://man7.org/linux/man-pages/man3/ftok.3.html" rel="nofollow">ftok</a>.</div>
</li>
<li class="level1"><div class="li"> Další funkce a systémová volání: <a href="http://man7.org/linux/man-pages/man2/fork.2.html" class="urlextern" title="http://man7.org/linux/man-pages/man2/fork.2.html" rel="nofollow">fork</a>, <a href="http://man7.org/linux/man-pages/man2/fork.2.html" class="urlextern" title="http://man7.org/linux/man-pages/man2/fork.2.html" rel="nofollow">wait</a>, <a href="http://man7.org/linux/man-pages/man2/shmat.2.html" class="urlextern" title="http://man7.org/linux/man-pages/man2/shmat.2.html" rel="nofollow">shmat</a>, <a href="http://man7.org/linux/man-pages/man2/semctl.2.html" class="urlextern" title="http://man7.org/linux/man-pages/man2/semctl.2.html" rel="nofollow">semctl</a>, <a href="http://man7.org/linux/man-pages/man2/semget.2.html" class="urlextern" title="http://man7.org/linux/man-pages/man2/semget.2.html" rel="nofollow">semget</a>, <a href="http://man7.org/linux/man-pages/man2/shmget.2.html" class="urlextern" title="http://man7.org/linux/man-pages/man2/shmget.2.html" rel="nofollow">shmget</a>, <a href="http://man7.org/linux/man-pages/man3/sem_open.3.html" class="urlextern" title="http://man7.org/linux/man-pages/man3/sem_open.3.html" rel="nofollow">sem_open</a>, <a href="http://man7.org/linux/man-pages/man3/usleep.3.html" class="urlextern" title="http://man7.org/linux/man-pages/man3/usleep.3.html" rel="nofollow">usleep</a>, …</div>
</li>
</ul>

</div>
<h3 class="sectionedit6" id="chybove_stavy">Chybové stavy</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> Pokud některý ze vstupů nebude 
odpovídat očekávanému formátu nebo bude mimo povolený rozsah, program 
vytiskne chybové hlášení na standardní chybový výstup, uvolní všechny 
dosud alokované zdroje a ukončí se s kódem (<em>exit code</em>) <code>1</code>.</div>
</li>
<li class="level1"><div class="li"> Pokud selže systémové volání, 
program vytiskne chybové hlášení na standardní chybový výstup, uvolní 
všechny alokované zdroje a ukončí se s kódem (<em>exit code</em>) <code>2</code>.</div>
</li>
</ul>

</div>
<h3 class="sectionedit7" id="popis_procesu_a_jejich_vystupu">Popis procesů a jejich výstupů</h3>
<div class="level3">

<p>
<em class="u">Poznámka k výstupům:</em>
</p>
<ul>
<li class="level1"><div class="li"> <code>A</code> je pořadové číslo prováděné akce,</div>
</li>
<li class="level1"><div class="li"> <code>NAME</code> je zkratka kategorie příslušného procesu, tj. <code>A</code> pro <em>adult</em> a <code>C</code> pro <em>child</em>,</div>
</li>
<li class="level1"><div class="li"> <code>I</code> je interní identifikátor procesu v rámci příslušné kategorie,</div>
</li>
<li class="level1"><div class="li"> <code>CA</code> je počet procesů <em>adult</em> aktuálně přítomných v centru včetně těch, kteří chtějí odejít, ale zatím musí zůstat,</div>
</li>
<li class="level1"><div class="li"> <code>CC</code> je počet procesů <em>child</em> aktuálně přítomných v centru.</div>
</li>
<li class="level1"><div class="li"> Při vyhodnocování výstupu budou ignorovány mezery a tabelátory.</div>
</li>
</ul>

<p>
<em class="u">Proces <em>adult</em></em>
</p>
<ol>
<li class="level1"><div class="li"> Po spuštění tiskne <code>A: NAME I: started</code>.</div>
</li>
<li class="level1"><div class="li"> Proces vstupuje do centra. Po vstupu tiskne <code>A: NAME I: enter</code>.</div>
</li>
<li class="level1"><div class="li"> Proces simuluje aktivitu v centru tak, že se uspí na náhodnou dobu z intervalu <code>&lt;0, AWT&gt;</code>.</div>
</li>
<li class="level1 node"><div class="li"> Po probuzení tiskne proces <code>A: NAME I: trying to leave</code> a pokusí se opustit centrum:</div>
<ol>
<li class="level2 node"><div class="li"> pokud by po jeho opuštění byla porušena podmínka, tj. <code>počet_dětí &gt; počet_dospělých * 3</code></div>
<ol>
<li class="level3"><div class="li"> proces nemůže opustit centrum a musí počkat, až centrum opustí příslušný počet dětí. Proces tiskne <code>A: NAME I: waiting: CA: CC</code></div>
</li>
<li class="level3"><div class="li"> jakmile centrum opustí dostatečný počet dětí, proces opustí centrum a poté tiskne <code>A: NAME I: leave</code></div>
</li>
</ol>
</li>
<li class="level2"><div class="li"> pokud by po jeho opuštění nebyla porušena podmínka, proces opustí centrum a poté tiskne <code>A: NAME I: leave</code></div>
</li>
</ol>
</li>
<li class="level1"><div class="li"> Těsně před ukončením proces tiskne <code>A: NAME I: finished</code>.</div>
</li>
</ol>

<p>
<em class="u">Proces <em>child</em></em>
</p>
<ol>
<li class="level1"><div class="li"> Po spuštění tiskne <code>A: NAME I: started</code>.</div>
</li>
<li class="level1 node"><div class="li"> Proces se pokusí vstoupit do centra:</div>
<ol>
<li class="level2 node"><div class="li"> pokud by po jeho vstupu byla porušena podmínka, tj. <code>počet_dětí &gt; počet_dospělých * 3</code></div>
<ol>
<li class="level3"><div class="li"> proces nemůže vstoupit a musí počkat, až do centra vstoupí další dospělý. Proces tiskne <code>A: NAME I: waiting: CA: CC</code></div>
</li>
<li class="level3"><div class="li"> jakmile do centra vstoupí dospělý a vstupem dítěte by nebyla porušena podmínka, vstoupí proces do centra a poté tiskne <code>A: NAME I: enter</code></div>
</li>
</ol>
</li>
<li class="level2"><div class="li"> pokud by po jeho vstupu nebyla porušena podmínka, proces vstoupí do centra a poté tiskne <code>A: NAME I: enter</code></div>
</li>
</ol>
</li>
<li class="level1"><div class="li"> Proces simuluje aktivitu v centru tak, že se uspí na náhodnou dobu z intervalu <code>&lt;0, CWT&gt;</code>.</div>
</li>
<li class="level1"><div class="li"> Po probuzení tiskne proces <code>A: NAME I: trying to leave</code> a poté opouští centrum.</div>
</li>
<li class="level1"><div class="li"> Po opuštění centra tiskne <code>A: NAME I: leave</code>.</div>
</li>
<li class="level1"><div class="li"> Těsně před ukončením proces tiskne <code>A: NAME I: finished</code>.</div>
</li>
</ol>

<p>
<em class="u">Společné podmínky</em>
</p>
<ol>
<li class="level1"><div class="li"> Všechny procesy <em>adult</em> a <em>child</em> se ukončí současně, tj. čekají, až všichni dokončí operace a opustí centrum. Teprve poté tisknou informaci <code>… finished</code>.</div>
</li>
<li class="level1"><div class="li"> Pokud má <code>AGT</code> nebo <code>CGT</code> hodnotu 0, znamená to, že se všechny příslušné procesy vygenerují ihned.</div>
</li>
<li class="level1"><div class="li"> Pokud má <code>AWT</code> nebo <code>CWT</code> hodnotu 0, znamená to, že na příslušném místě nedojde k uspání procesu.</div>
</li>
<li class="level1"><div class="li"> Při vcházení do centra a odcházení z centra nezáleží na pořadí procesů - pokud např. proces <em>child</em> čeká na vstup jako první, nemusí nutně vstoupit jako první.</div>
</li>
<li class="level1"><div class="li"> Mezi výstupem <code>trying to leave</code> a <code>leave</code> (příp. <code>waiting</code>) <font color="red">stejného procesu</font> se nesmí objevit  výstup <code>enter</code> žádného procesu.</div>
</li>
<li class="level1"><div class="li"> <strong>Problém zablokování běhu aplikace:</strong> Může nastat situace, kdy v centru nejsou žádné procesy <em>adult</em>, další se již negenerují (jejich počet byl vyčerpán), přesto vznikají procesy <em>child</em>,
 které chtějí vstoupit. V takovém případě by došlo k zablokování. 
Implementujte řešení tak, aby v této situaci nebyla aplikována podmínka 
centra, tj. procesy <em>child</em> mohly vstupovat a vystupovat bez omezení.</div>
</li>
</ol>

</div>
<h2 class="sectionedit8" id="ukazka_vystupu">Ukázka výstupů</h2>
<div class="level2">

</div>

<h4 id="ukazka_c_1">Ukázka č. 1</h4>
<div class="level4">

<p>
Spuštění: <code>$ ./proj2 1 2 0 0 0 0</code>
</p>

<p>
Výstup (<code>proj2.out</code>): 
</p>
<pre class="code">1	: A 1	: started
2	: A 1	: enter
3	: C 2	: started
4	: C 1	: started
5	: C 2	: enter
6	: A 1	: trying to leave
7	: A 1	: waiting : 1 : 1
8	: C 1	: enter
9	: C 2	: trying to leave
10	: C 2	: leave
11	: C 1	: trying to leave
12	: C 1	: leave
13	: A 1	: leave
14	: A 1	: finished
15	: C 2	: finished
16	: C 1	: finished</pre>

</div>

<h4 id="ukazka_c_2">Ukázka č. 2</h4>
<div class="level4">

<p>
Spuštění: <code>$ ./proj2 1 4 1 10 5 5</code>
</p>

<p>
Výstup (<code>proj2.out</code>): 
</p>
<pre class="code">1	: A 1	: started
2	: A 1	: enter
3	: A 1	: trying to leave
4	: A 1	: leave
5	: C 1	: started
6	: C 1	: enter
7	: C 1	: trying to leave
8	: C 1	: leave
9	: C 2	: started
10	: C 2	: enter
11	: C 2	: trying to leave
12	: C 2	: leave
13	: C 3	: started
14	: C 3	: enter
15	: C 3	: trying to leave
16	: C 3	: leave
17	: C 4	: started
18	: C 4	: enter
19	: C 4	: trying to leave
20	: C 4	: leave
21	: C 2	: finished
22	: A 1	: finished
23	: C 1	: finished
24	: C 4	: finished
25	: C 3	: finished</pre>

</div>
<h2 class="sectionedit9" id="podminky_vypracovani_projektu">Podmínky vypracování projektu</h2>
<div class="level2">

</div>
<h3 class="sectionedit10" id="obecne_informace">Obecné informace</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> Projekt implementujte v jazyce C.</div>
</li>
<li class="level1"><div class="li"> Komentujte zdrojové kódy, programujte přehledně. Součástí hodnocení bude i kvalita zdrojového kódu.</div>
</li>
<li class="level1"><div class="li"> Kontrolujte, zda se všechny procesy 
ukončují korektně a zda při ukončování správně uvolňujete všechny 
alokované zdroje (např. příkazem <code>ipcs</code> můžete zjistit, jaké zdroje System V jsou v systému alokovány).</div>
</li>
<li class="level1"><div class="li"> Dodržujte syntax zadaných jmen, 
formát souborů a formát výstupních dat! Čtěte pozorně zadání a poznámky k
 vypracování u jednotlivých zadání.</div>
</li>
<li class="level1"><div class="li"> Projekt musí být přeložitelný a spustitelný na počítači <code>merlin.fit.vutbr.cz</code>.</div>
</li>
<li class="level1"><div class="li"> Dotazy k zadání: Veškeré nejasnosti a dotazy řešte pouze prostřednictvím diskuzního fóra k projektu 2.</div>
</li>
</ul>

</div>
<h3 class="sectionedit11" id="preklad">Překlad</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> Pro překlad používejte nástroj <code>make</code>. Součástí odevzdání bude soubor <code>Makefile</code>.</div>
</li>
<li class="level1"><div class="li"> Překlad se provede příkazem <code>make</code> v adresáři, kde je umístěn soubor <code>Makefile</code>.</div>
</li>
<li class="level1"><div class="li"> Po překladu vznikne spustitelný soubor se jménem <code>proj2</code>, který bude umístěn ve stejném adresáři jako soubor <code>Makefile</code>.</div>
</li>
<li class="level1"><div class="li"> Zdrojové kódy překládejte s přepínači <code>-std=gnu99 -Wall -Wextra -Werror -pedantic</code>.</div>
</li>
</ul>

</div>
<h3 class="sectionedit12" id="odevzdani">Odevzdání</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> Součástí odevzdání budou pouze soubory se zdrojovými kódy (<code>*.c</code>, <code>*.h</code>) a soubor <code>Makefile</code>. Tyto soubory zabalte pomocí nástoje zip do archivu s názvem <code>proj2.zip</code>.</div>
</li>
<li class="level1"><div class="li"> Archiv vytvořte tak, aby po rozbalení byl soubor <code>Makefile</code> umístěn ve stejném adresáři, jako je archiv.</div>
</li>
<li class="level1"><div class="li"> Archiv <code>proj2.zip</code> odevzdejte prostřednictvím informačního systému, termín <em>Projekt 2</em>.</div>
</li>
<li class="level1"><div class="li"> Pokud nebude dodržena forma odevzdání nebo projekt nepůjde přeložit, bude projekt hodnocen 0 body.</div>
</li>
<li class="level1"><div class="li"> Archiv odevzdejte pomocí 
informačního systému v dostatečném předstihu (odevzdaný soubor můžete 
před vypršením termínu snadno nahradit jeho novější verzí, kdykoliv 
budete potřebovat).</div>
</li>
</ul>

</div>
<h2 class="sectionedit13" id="overovaci_skript">Ověřovací skript</h2>
<div class="level2">

<p>
Základní skript pro ověření korektnosti výstupního formátu a základní 
posloupnosti. Informace o skriptu jsou uvedeny v komentáři skriptu. 
Skript je dodán tak, jak je. Pokud naleznete v testovacím skriptu chybu,
 napište tuto informaci na fórum. 
</p>
<ul>
<!--
<li class="level1"><div class="li"> <em>Bude doplněno …</em></div>
-->
<li class="level1"><div class="li"> <a href="https://www.fit.vutbr.cz/study/courses/IOS/public/Lab/projekty/projekt2/check-syntax.sh">check-syntax.sh</a></div>
</li>
</ul>

</div>
                    <!-- wikipage stop -->
                                    </div>

                <div class="docInfo">Last modified: 2017-03-29</div>

                            </div></div><!-- /content -->

            <hr class="a11y">

            <!-- PAGE ACTIONS --
            <div id="dokuwiki__pagetools">
                <h3 class="a11y">Page Tools</h3>
                <div class="tools">
                    <ul>
                        <li><a href="https://www.fit.vutbr.cz/%7Esmrcka/w/doku.php?id=vyuka:ios_ulohy&amp;do=edit" class="action edit" accesskey="e" rel="nofollow" title="Edit this page [E]"><span>Edit this page</span></a></li><li><a href="https://www.fit.vutbr.cz/%7Esmrcka/w/doku.php?id=vyuka:ios_ulohy&amp;do=revisions" class="action revs" accesskey="o" rel="nofollow" title="Old revisions [O]"><span>Old revisions</span></a></li><li><a href="#dokuwiki__top" class="action top" accesskey="t" rel="nofollow" title="Back to top [T]"><span>Back to top</span></a></li>                    </ul>
                </div>
            </div>
            -->
        </div><!-- /wrapper -->

        
<!-- ********** FOOTER ********** -->
<!--
<div id="dokuwiki__footer"><div class="pad">
    
    <div class="buttons">
                <a href="http://www.dokuwiki.org/donate" title="Donate"><img src="vyuka:ios_ulohy%20[AS]_soubory/button-donate.gif" alt="Donate" width="80" height="15"></a>
        <a href="http://www.php.net/" title="Powered by PHP"><img src="vyuka:ios_ulohy%20[AS]_soubory/button-php.gif" alt="Powered by PHP" width="80" height="15"></a>
        <a href="http://validator.w3.org/check/referer" title="Valid HTML5"><img src="vyuka:ios_ulohy%20[AS]_soubory/button-html5.png" alt="Valid HTML5" width="80" height="15"></a>
        <a href="http://jigsaw.w3.org/css-validator/check/referer?profile=css3" title="Valid CSS"><img src="vyuka:ios_ulohy%20[AS]_soubory/button-css.png" alt="Valid CSS" width="80" height="15"></a>
        <a href="http://dokuwiki.org/" title="Driven by DokuWiki"><img src="vyuka:ios_ulohy%20[AS]_soubory/button-dw.png" alt="Driven by DokuWiki" width="80" height="15"></a>
    </div>
</div></div><!-- /footer -->

    </div></div><!-- /site -->

    <div class="no"><img src="vyuka:ios_ulohy%20[AS]_soubory/indexer.gif" alt="" width="2" height="1"></div>
    <div id="screen__mode" class="no"></div>    <!--[if ( lte IE 7 | IE 8 ) ]></div><![endif]-->



</body></html>